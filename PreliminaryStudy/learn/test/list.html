<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="../js/react.development.js"></script>
    <script src="../js/react-dom.development.js"></script>
    <script src="../js/babel.min.js"></script>
</head>
<body>
    <div id="example"></div>
    <script type="text/babel">
        /* React 列表 & Keys */
        /* 使用 map() 方法遍历数组生成了一个 1 到 5 的数字列表: */
        // const numbers = [1, 2, 3, 4, 5];
        // const listItems = numbers.map((numbers) =>
        //     <li>{numbers}</li>
        // );
        // ReactDOM.render(
        //     <ul>{listItems}</ul>,
        //     document.getElementById('example')
        // )

        /* 我们可以将以上实例重构成一个组件，组件接收数组参数，每个列表元素分配一个 key，不然会出现警告 a key should be provided for list items，意思就是需要包含 key： */
        // function NumberList(props) {
        //     const numbers = props.numbers;
        //     const listItems = numbers.map((number) => 
        //         <li key={number.toString()}>
        //             {number}
        //         </li>
        //     );
        //     return (
        //         <ul>{listItems}</ul>
        //     );
        // }
        // const numbers = [1, 2, 3, 4, 5];
        // ReactDOM.render(
        //     <NumberList numbers={numbers} />,
        //     document.getElementById('example')
        // )

        /* Keys */
        /* Keys 可以在 DOM 中的某些元素被增加或删除的时候帮助 React 识别哪些元素发生了变化。因此你应当给数组中的每一个元素赋予一个确定的标识。 */
        // const numbers = [1, 2, 3, 4, 5];
        // const listItems = numbers.map((number) =>
        //     <li key={number.toString()}>
        //         {number}
        //     </li>
        // );

        /* 一个元素的 key 最好是这个元素在列表中拥有的一个独一无二的字符串。通常，我们使用来自数据的 id 作为元素的 key: */
        // const todoItems = todos.map((todo) =>
        //     <li key={todo.id}>
        //         {todo.text}
        //     </li>
        // );

        /* 当元素没有确定的 id 时，你可以使用他的序列号索引 index 作为 key： */
        // const todoItems = todos.map((todo, index) =>
        //     // 只有在没有确定的 id 时使用
        //     <li key={index}>
        //         {todo.text}
        //     </li>
        // );
        /* 如果列表可以重新排序，我们不建议使用索引来进行排序，因为这会导致渲染变得很慢。 */


        /* 用keys提取组件 */
        /* 元素的 key 只有在它和它的兄弟节点对比时才有意义。 */

        /* 错误示范 */
        // function ListItem(props) {
        //     const value = props.value;
        //     return (
        //         // 错啦！你不需要在这里指定key:
        //         <li key={value.toString()}>
        //             {value}
        //         </li>
        //     );
        // }
        // function NumberList(props) {
        //     const numbers = props.numbers;
        //     const listItems = numbers.map((number) =>
        //         //错啦！元素的key应该在这里指定：
        //         <ListItem value={number} />
        //     );
        //     return (
        //         <ul>
        //             {listItems}
        //         </ul>
        //     );
        // }
        // const numbers = [1, 2, 3, 4, 5];
        // ReactDOM.render(
        //     <NumberList numbers={numbers} />,
        //     document.getElementById('example')
        // );

        /* key的正确使用方式 */
        // function ListItem (props) {
        //     return <li>{props.value}</li>;
        // }
        // function NumberList(props) {
        //     const numbers = props.numbers;
        //     const listItems = numbers.map((number) => 
        //         <ListItem key={number.toString()} 
        //                   value={number} />
        //     );
        //     return (
        //         <ul>
        //             {listItems}
        //         </ul>
        //     );
        // }

        // const numbers = [1, 2, 3, 4, 5];
        // ReactDOM.render(
        //     <NumberList numbers={numbers} />,
        //     document.getElementById('example')
        // )
        // // 当你在 map() 方法的内部调用元素时，你最好随时记得为每一个元素加上一个独一无二的 key。


        /* 元素的 key 在他的兄弟元素之间应该唯一 */
        /* 数组元素中使用的 key 在其兄弟之间应该是独一无二的。然而，它们不需要是全局唯一的。当我们生成两个不同的数组时，我们可以使用相同的键。 */
        // function Blog(props) {
        //     const sideBar = (
        //         <ul>
        //             {props.posts.map((post) => 
        //                 <li key={post.id}>
        //                     {post.title}
        //                 </li>
        //             )}
        //         </ul>
        //     );
        //     const content = props.posts.map((post) => 
        //         <div key={post.id}>
        //             <h3>{post.title}</h3>
        //             <p>{post.content}</p>
        //         </div>
        //     );
        //     return (
        //         <div>
        //             {sideBar}
        //             <hr />
        //             {sideBar}
        //         </div>
        //     );
        // }
        // const posts = [
        //     {id: 1, title: 'Hello World', content: 'Welcome to learning React!'},
        //     {id: 2, title: 'Installation', content: 'You can install React from npm.'}
        // ];
        // ReactDOM.render(
        //     <Blog posts={posts} />,
        //     document.getElementById('example')
        // )

        /* key 会作为给 React 的提示，但不会传递给你的组件。如果您的组件中需要使用和 key 相同的值，请将其作为属性传递： */
        // const content = posts.map((post) =>
        // <Post
        //     key={post.id}
        //     id={post.id}
        //     title={post.title} />
        // );


        /* 在 jsx 中嵌入 map() */
        // function NumberList(props) {
        // function NumberList(props) {
        //     const numbers = props.numbers;
        //     const listItems = numbers.map((number) =>
        //         <ListItem key={number.toString()}
        //                 value={number} />

        //     );
        //     return (
        //         <ul>
        //         {listItems}
        //         </ul>
        //     );
        // }

        // JSX 允许在大括号中嵌入任何表达式，所以我们可以在 map() 中这样使用：

        // function ListItem(props) {
        //     return <li>{props.value}</li>;
        // }
        // function NumberList(props) {
        //     const numbers = props.numbers;
        //     return (
        //         <ul>
        //             {numbers.map((number) => 
        //                 <ListItem key={number.toString()}
        //                     value={number} />
        //             )}
        //         </ul>
        //     );
        // }
        // const numbers = [1, 2, 3, 4, 5];
        // ReactDOM.render(
        //     <NumberList numbers={numbers} />,
        //     document.getElementById('example')
        // );
    </script>
</body>
</html>